<root name="simulation">

    <!-- Same order as User Guide -->

    <!-- GENERAL -->

    <blueprint name="log" required="false" allows_children="false" description="Controls logging level.">
        <entry name="level" type="enum">
            <enum_choice>DEBUG</enum_choice>
            <enum_choice>LOG_LOW</enum_choice>
            <enum_choice>LOG</enum_choice>
            <enum_choice>MESSAGE</enum_choice>
            <enum_choice>WARNING</enum_choice>
            <enum_choice>ERROR</enum_choice>
            <enum_choice>EXCEPTION</enum_choice>
        </entry>
    </blueprint>

    <blueprint name="restart" required="false" allows_children="false"
               description="Controls saving and reloading of restart data. Currently only particle data are saved.
               Support for field and fluid materials saving and restarting is pending.">
        <entry name="it_save" type="int" default="500" description="Frequency of restart data saves."/>
        <entry name="nt_add" type="int" default="-1"
               description="Number of additional time steps to run after restart load if &gt;0."/>
        <entry name="load" type="bool" default="false" description="Controls whether restart file should be loaded."/>
        <entry name="save" type="bool" default="false" description="Controls whether restart data should be saved."/>
    </blueprint>

    <blueprint name="starfish" required="true" visible="false" description="Runs the actual simulation."/>

    <blueprint name="time" required="true" description="Controls the duration of the simulation.">
        <entry name="dt" type="float" required="true" description="Simulation time step, in seconds."/>
        <entry name="num_it" type="int" required="true" description="Number of time steps to simulate."/>
        <entry name="steady_state" type="string" default="auto"
               description="Time step at which the steady state is reached. If “auto”, Starfish automatically sets
               steady state based on differences in particle counts."/>
    </blueprint>

    <blueprint name="animation" required="false"
               description="Periodically save simulation results. Any &lt;output&gt; command nested in this command will
                be executed at the rate specified in this command.">
        <entry name="start_it" type="int" default="0" required="true"
               description="Time step at which output should begin"/>
        <entry name="frequency" type="int" default="10" required="true"
               description="Number of time steps between file saves"/>
        <entry name="clear_samples" type="bool" default="true" required="true"
               description="Specifies whether density and velocity samples should be cleared after each save, but only
               prior to steady state"/>
    </blueprint>

    <blueprint name="averaging" required="false"
               description="Enables averaging of specified variables. The averaged values will have “-ave” append to the
                prefix. For instance, the average number density of o+ will be called “nd-ave.o+”, while “nd.o+” will
                contain the instantaneous data. Starting time step should correspond to time after steady state is
                reached.">
        <entry name="frequency" type="int" default="1" description="Number of time steps between averaging samples."/>
        <entry name="start_it" type="int" default="-1" description="Starting time step for averaging."/>
        <entry name="variables" type="s_list" description="List of variables to average."/>
    </blueprint>

    <blueprint name="load_field"
               description="Loads field data from a file. Can be used, among other things, to load an external magnetic
               field.">
        <entry name="format" type="enum" description="File format. A TECPLOT file should list variables on a single
        VARIABLES line. The TABLE format is assumed to start with ni,nj, and is hardcoded for “z,r,B,Bz,Br” data.">
            <enum_choice>TECPLOT</enum_choice>
            <enum_choice>TABLE</enum_choice>
        </entry>
        <entry name="file_name" type="string" description="name of the file to load."/>
        <entry name="coords" type="s_list"
               description="names of two file variables to correspond to XY, RZ, or ZR, according to the specified
               &lt;domain&gt; type."/>
        <entry name="vars" type="s_pairs" description="variables to load in “starfish_var=file_var” format.
        The assignment part is not needed if the file variable is the same as the expected Starfish variable name."/>
    </blueprint>

    <blueprint name="output" required="false" allows_children="false"
               description="Top level command to generate simulation result files. Inputs depend on the output type.">
        <entry name="type" type="enum">
            <enum_choice>1D</enum_choice>
            <enum_choice>2D</enum_choice>
            <enum_choice>boundaries</enum_choice>
            <enum_choice>particles</enum_choice>
        </entry>
        <entry name="file_name" type="string"/>
        <entry name="format" type="enum">
            <enum_choice>VTK</enum_choice>
            <enum_choice>TECPLOT</enum_choice>
        </entry>
        <entry name="output_for_mat" type="enum"
               description="Applicable only for VTK files as of now. One of [ASCII, BINARY, APPENDED]. The BINARY option
                corresponds to Base64 encoded data. The APPENDED option places the raw bytes in an &lt;AppendedData&gt;
                section.">
            <enum_choice>ASCII</enum_choice>
            <enum_choice>BINARY</enum_choice>
            <enum_choice>APPENDED</enum_choice>
        </entry>
        <entry name="scalars" type="s_list"
               description="List of node-centered scalar variables to output."/>
        <entry name="cell_data" type="s_list" description="List of cell-centered scalars to output."/>
        <entry name="vectors" type="s_tuples"
               description="Pairs of node-centered scalar variables to group together as vectors.
               Only affects VTK output."/>
    </blueprint>

    <blueprint name="particle_trace" required="false"
               description="Command to sample position and velocity of one or more particles to generate a trace file.
               This file can be used to visualize the paths of individual particles.">
        <entry name="file_name" type="string"/>
        <entry name="format" type="enum">
            <enum_choice>VTK</enum_choice>
            <enum_choice>TECPLOT</enum_choice>
        </entry>
        <entry name="material" type="string" description="Material of the sampled particle"/>
        <entry name="ids" type="i_list" description="Ids of particle(s) to sample."/>
        <entry name="random_ids" type="int2"
               description="Alternate method to specify particle ids if &lt;ids&gt; not used. The first value is the
               number of particles to sample, and the second value is the maximum particle id used for picking random
               ids."/>
        <entry name="start_it" type="int" default="0" description="Starting time step for sampling."/>
        <entry name="end_it" type="int" default="-1" description="Ending time step for sampling."/>
        <entry name="sample_skip" type="int" default="1" description="Number of time steps between trace sampling"/>
        <entry name="output_skip" type="int" default="50"
               description="Frequency of how often the trace file gets updated. -1 means to output only after the
               simulation terminates."/>
    </blueprint>

    <blueprint name="stats" required="false" description="Command to control frequency of screen and file output.">
        <entry name="file_name" type="string" default="starfish_stats.csv"/>
        <entry name="skip" type="int" default="1" description="Output frequency. Value &lt;=0 disables file output."/>
    </blueprint>

    <blueprint name="sample_vdf" required="false"
               description="Produces histogram of the velocity distribution function of a given material with a box
               region.">
        <entry name="material" type="string" description="Kinetic material to sample."/>
        <entry name="xmin" type="float2" description="[x1,y1] corner of the sampling region."/>
        <entry name="xmax" type="float2" description="[x2,y2] corner of the sampling region."/>
        <entry name="speed_bins" type="int" default="20" description="Number of histogram bins for speed."/>
        <entry name="vel_bins" type="int3" default="20,20,20" description="Number of histogram bins for velocity."/>
        <entry name="start_it" type="int" default="-1" description="Time step to start sampling."/>
        <entry name="skip_sample" type="int" default="100" description="Number of time steps between sampling."/>
        <entry name="skip_output" type="int" default="1000" description="Number of time steps between file outputs."/>
        <entry name="file_name" type="string"
               description="File name prefix to output to. Data is stored in .csv format."/>
    </blueprint>

    <!-- MATERIALS -->

    <blueprint name="materials" required="false" allows_children="true"
               description="Definition of materials known to the simulation. Nest &lt;material&gt; commands in this command">
    </blueprint>
    <blueprint name="material" required="false"
               description="Definition of a single material. Must be nested within a &lt;materials&gt; command.">
        <entry name="type" type="enum"
               description="Material type. Can be one of “solid” (materials that do not change), “kinetic” (materials
               simulated with particles), “fluid_diffusion” (density updated with advection-diffusion solver), or
               “boltzmann_electrons” (tells Starfish to create a fluid electron population). Additional material types
               can be provided by plugins.">
            <enum_choice>solid</enum_choice>
            <enum_choice>kinetic</enum_choice>
            <enum_choice>fluid_diffusion</enum_choice>
            <enum_choice>boltzmann_electrons</enum_choice>
        </entry>
        <entry name="name" type="string" description="Name that this material will be referenced by."/>
        <entry name="init" type="s_list"
               description="List of one or more initial values for the following fields: “nd”, “nd_back” (#/m3), “u”,
               “v” (m/s), and “T” (K). With the exception of nd_back, these entries are currently used only to set the
               initial values of density, velocity, or temperature on the computational mesh. The value of nd_back is
               added to the density computed from particles and can be used to set a minimum material density floor."/>
        <entry name="molwt" type="float" description="Material molecular weight."/>
        <entry name="charge" type="float" description="Material charge in elementary charge units."/>
        <entry name="work_function" type="float" description="Material work function in eV"/>
        <entry name="p_vap_coeffs" type="float3"
               description="Coefficient for vapor pressure computation using Antoine equation, log_10(p)=A-B/(C+T)"/>
        <entry name="ionization_energy" type="float" default="-1"
               description="Ionization energy in eV, used by ionization MCC algorithm"/>
        <!-- MUST MAKE CASES -->
    </blueprint>

    <blueprint name="material_interactions" required="false" allows_children="true">

    </blueprint>
    <blueprint name="surface_hit">
        <entry name="file_name" type="string" default="starfish_stats.csv"/>
        <entry name=""/>
    </blueprint>
    <blueprint name="dsmc" required="false" allows_children="false">
        <entry name="pair" type="s_list"/>
        <entry name="model" type="enum">
            <enum_choice>elastic</enum_choice>
        </entry>
        <entry name="frequency" type="int" default="1"/>
        <entry name="sig_cr_max" type="float" default="1e-16"/>
        <entry name="sigma" type="enum">
            <enum_choice>const</enum_choice>
            <enum_choice>inv</enum_choice>
            <enum_choice>bird463</enum_choice>
            <enum_choice>tabulated</enum_choice>
        </entry>
        <entry name="sigma_coeffs" type="f_list"/>
        <entry name="sigma_tabulated" type="f2_list"/>
        <entry name="sigma_dep_var" type="enum">
            <enum_choice>VELOCITY</enum_choice>
            <enum_choice>ENERGY</enum_choice>
        </entry>
    </blueprint>
    <blueprint name="mcc" required="false" allows_children="false">
        <entry name="source" type="string"/>
        <entry name="target" type="string"/>
        <entry name="product" type="string"/>
        <entry name="model" type="enum">
            <enum_choice>MEX</enum_choice>
            <enum_choice>ELASTIC</enum_choice>
            <enum_choice>CEX</enum_choice>
            <enum_choice>IONIZATION</enum_choice>
        </entry>
        <entry name="sigma" type="string"/>
        <entry name="max_target_temp" type="float"/>
        <entry name="ionization_energy" type="string"/>
    </blueprint>
    <blueprint name="chemistry" required="false" allows_children="false">
        <entry name="sources" type="s_list"/>
        <entry name="products" type="s_list"/>
        <!-- RATE, DEP_VAR -->

    </blueprint>

    <!-- BOUNDARIES -->

    <blueprint name="boundaries" required="false" allows_children="true">

    </blueprint>
    <blueprint name="boundary">
        <entry name="name" type="string"/>
        <entry name="type" type="enum" required="true">
            <enum_choice>SOLID</enum_choice>
            <enum_choice>OPEN</enum_choice>
            <enum_choice>SYMMETRY</enum_choice>
            <enum_choice>VIRTUAL</enum_choice>
        </entry>
        <entry name="value" type="string" defualt="0"/>
        <entry name="material" type="string"/>
        <entry name="temperature" type="string" default="273.15"/>
        <entry name="path" type="path" required="true"/>
        <entry name="reverse" type="bool"/>
    </blueprint>

    <!-- DOMAIN -->

    <blueprint name="domain" required="false" allows_children="true">
        <entry name="type" type="enum">
            <enum_choice>XY</enum_choice>
            <enum_choice>RZ</enum_choice>
            <enum_choice>ZR</enum_choice>
        </entry>
    </blueprint>
    <blueprint name="mesh" required="false" allows_children="false">
        <entry name="name" type="string"/>
        <entry name="type" type="enum">
            <enum_choice>UNIFORM</enum_choice>
            <enum_choice>ELLIPTIC</enum_choice>
        </entry>
        <!-- not finished -->
    </blueprint>

    <!-- SOURCES -->

    <blueprint name="sources" required="false" allows_children="true">

    </blueprint>

    <!-- SOLVER -->
    <blueprint name="solver" required="false" allows_children="false">
        <entry name="type" type="string"/>
        <entry name="initial_only" type="bool" default="false"/>
        <entry name="max_it" type="float" default="5000"/>
        <entry name="tol" type="float" default="1e-6"/>
        <entry name="nl_max_it" type="float" default="50"/>
        <entry name="nl_tol" type="float" default="1e-4"/>

    </blueprint>

    <!-- CUSTOM PLUGINS BELOW HERE -->

</root>